import{_ as i,c as a,o as n,a0 as h}from"./chunks/framework.MNVsvnY4.js";const g=JSON.parse('{"title":"Microsoft.Extensions.AI Integration","description":"","frontmatter":{},"headers":[],"relativePath":"microsoft.extension.ai/microsoft-extension-ai.md","filePath":"5. Microsoft.Extension.AI/Microsoft-Extension-AI.md"}'),t={name:"microsoft.extension.ai/microsoft-extension-ai.md"};function k(l,s,p,e,D,r){return n(),a("div",null,s[0]||(s[0]=[h(`<h1 id="microsoft-extensions-ai-integration" tabindex="-1">Microsoft.Extensions.AI Integration <a class="header-anchor" href="#microsoft-extensions-ai-integration" aria-label="Permalink to &quot;Microsoft.Extensions.AI Integration&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>LlmTornado.Microsoft.Extensions.AI provides integration with Microsoft&#39;s AI abstractions, enabling seamless use of LlmTornado in applications using Microsoft.Extensions.AI patterns.</p><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">​</a></h2><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Install package:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// dotnet add package LlmTornado.Microsoft.Extensions.AI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Microsoft</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Extensions</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">AI</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> LlmTornado</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Create LlmTornado API</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoApi</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> tornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">your-api-key</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Use with Microsoft.Extensions.AI patterns</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> tornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AsChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt4</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">O</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Generate chat completion</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ChatCompletion</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> completion</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">CompleteAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Tell me about C#</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    cancellationToken</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> CancellationToken</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">None</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">completion</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Message</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Text</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><h2 id="integration-patterns" tabindex="-1">Integration Patterns <a class="header-anchor" href="#integration-patterns" aria-label="Permalink to &quot;Integration Patterns&quot;">​</a></h2><h3 id="chat-client" tabindex="-1">Chat Client <a class="header-anchor" href="#chat-client" aria-label="Permalink to &quot;Chat Client&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Microsoft</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Extensions</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">AI</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> LlmTornado</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoApi</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">your-api-key</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Convert to IChatClient</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AsChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt41</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">V41</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Use standard Microsoft.Extensions.AI patterns</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ChatCompletion</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">CompleteAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ChatMessage</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ChatRole</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">User</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">What is async/await?</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><h3 id="dependency-injection" tabindex="-1">Dependency Injection <a class="header-anchor" href="#dependency-injection" aria-label="Permalink to &quot;Dependency Injection&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Microsoft</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Extensions</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">DependencyInjection</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Microsoft</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Extensions</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">AI</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> LlmTornado</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Configure services</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IServiceCollection</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> services</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ServiceCollection</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">services</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AddSingleton</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;(</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">sp</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> =&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Configuration</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">OpenAI:ApiKey</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">])</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">services</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AddSingleton</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;(</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">sp</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">    TornadoApi</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> sp</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">GetRequiredService</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AsChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt4</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">O</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Use in application</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IServiceProvider</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> provider</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> services</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">BuildServiceProvider</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> provider</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">GetRequiredService</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ChatCompletion</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">CompleteAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Hello!</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><h3 id="streaming-support" tabindex="-1">Streaming Support <a class="header-anchor" href="#streaming-support" aria-label="Permalink to &quot;Streaming Support&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AsChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt4</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">O</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">await</span><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;"> foreach</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">StreamingChatCompletionUpdate</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> update</span><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;"> in</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">CompleteStreamingAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Tell me a story</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">))</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Write</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">update</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Text</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span></code></pre></div><h2 id="benefits" tabindex="-1">Benefits <a class="header-anchor" href="#benefits" aria-label="Permalink to &quot;Benefits&quot;">​</a></h2><h3 id="standardization" tabindex="-1">Standardization <a class="header-anchor" href="#standardization" aria-label="Permalink to &quot;Standardization&quot;">​</a></h3><ul><li>Use consistent patterns across different AI providers</li><li>Switch providers with minimal code changes</li><li>Leverage Microsoft.Extensions.AI ecosystem</li></ul><h3 id="dependency-injection-1" tabindex="-1">Dependency Injection <a class="header-anchor" href="#dependency-injection-1" aria-label="Permalink to &quot;Dependency Injection&quot;">​</a></h3><ul><li>Integrate cleanly with ASP.NET Core</li><li>Use standard DI patterns</li><li>Testability through interfaces</li></ul><h3 id="middleware-support" tabindex="-1">Middleware Support <a class="header-anchor" href="#middleware-support" aria-label="Permalink to &quot;Middleware Support&quot;">​</a></h3><ul><li>Add logging, caching, retry logic</li><li>Use built-in middleware patterns</li><li>Compose behaviors cleanly</li></ul><h2 id="use-cases" tabindex="-1">Use Cases <a class="header-anchor" href="#use-cases" aria-label="Permalink to &quot;Use Cases&quot;">​</a></h2><h3 id="asp-net-core-integration" tabindex="-1">ASP.NET Core Integration <a class="header-anchor" href="#asp-net-core-integration" aria-label="Permalink to &quot;ASP.NET Core Integration&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Startup.cs / Program.cs</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">builder</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Services</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AddSingleton</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;(</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">sp</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">builder</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Configuration</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">OpenAI:ApiKey</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">])</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">builder</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Services</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AddSingleton</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;(</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">sp</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">    TornadoApi</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> sp</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">GetRequiredService</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoApi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">AsChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt4</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">O</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// Controller</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ChatController</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> :</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ControllerBase</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    readonly</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> IChatClient</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    public</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> ChatController</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    {</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#569CD6;">        this</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">HttpPost</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">]</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Task</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IActionResult</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> Chat</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">([</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">FromBody</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">]</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> string</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> message</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    {</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        ChatCompletion</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> chatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">CompleteAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">message</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        return</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> Ok</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Message</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Text</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span></code></pre></div><h3 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ChatServiceTests</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Fact</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">]</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Task</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> TestChatCompletion</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">()</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">        // Mock IChatClient for testing</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        Mock</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> mockClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Mock</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IChatClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">        mockClient</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            .</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Setup</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">c</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> c</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">CompleteAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">It</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">IsAny</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">string</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;(),</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> default</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">))</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            .</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">ReturnsAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ChatCompletion</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ChatMessage</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ChatRole</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Assistant</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Test response</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)));</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">        </span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        ChatService</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> service</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ChatService</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">mockClient</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Object</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">        string</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> service</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">ProcessQuery</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Test</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">        </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">        Assert</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Equal</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Test response</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span></code></pre></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><ul><li>Use dependency injection for better testability</li><li>Implement proper cancellation token support</li><li>Handle exceptions appropriately</li><li>Log AI interactions for monitoring</li><li>Use middleware for cross-cutting concerns</li></ul><h2 id="related-topics" tabindex="-1">Related Topics <a class="header-anchor" href="#related-topics" aria-label="Permalink to &quot;Related Topics&quot;">​</a></h2><ul><li><a href="./../1. LlmTornado/1. Chat/1. basics">Chat Basics</a></li><li><a href="./../2. Agents/1. Getting-Started">Agent Basics</a></li><li><a href="https://learn.microsoft.com/en-us/dotnet/ai/" target="_blank" rel="noreferrer">Microsoft.Extensions.AI Documentation</a></li></ul>`,28)]))}const y=i(t,[["render",k]]);export{g as __pageData,y as default};
