import{_ as i,c as a,o as n,a0 as h}from"./chunks/framework.MNVsvnY4.js";const g=JSON.parse('{"title":"Tornado Runner","description":"","frontmatter":{},"headers":[],"relativePath":"agents/tornado-agent/tornado-runner.md","filePath":"2. Agents/2. Tornado-Agent/7. Tornado-Runner.md"}'),t={name:"agents/tornado-agent/tornado-runner.md"};function l(k,s,p,e,r,D){return n(),a("div",null,s[0]||(s[0]=[h(`<h1 id="tornado-runner" tabindex="-1">Tornado Runner <a class="header-anchor" href="#tornado-runner" aria-label="Permalink to &quot;Tornado Runner&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>TornadoRunner provides advanced execution control for agents, including features like guardrails, monitoring, and sophisticated error handling. It&#39;s designed for production scenarios requiring robust agent management.</p><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick Start&quot;">​</a></h2><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> LlmTornado</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Agents</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoAgent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoAgent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> model</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">// TornadoRunner is used internally when calling RunAsync</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Conversation</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">RunAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Your query here</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">​</a></h2><h3 id="event-handling" tabindex="-1">Event Handling <a class="header-anchor" href="#event-handling" aria-label="Permalink to &quot;Event Handling&quot;">​</a></h3><ul><li>Monitor agent execution in real-time</li><li>Track tool calls and completions</li><li>Receive streaming updates</li><li>Log all agent activities</li></ul><h3 id="error-recovery" tabindex="-1">Error Recovery <a class="header-anchor" href="#error-recovery" aria-label="Permalink to &quot;Error Recovery&quot;">​</a></h3><ul><li>Automatic retry on transient failures</li><li>Graceful degradation</li><li>Fallback strategies</li><li>Comprehensive error reporting</li></ul><h3 id="performance-monitoring" tabindex="-1">Performance Monitoring <a class="header-anchor" href="#performance-monitoring" aria-label="Permalink to &quot;Performance Monitoring&quot;">​</a></h3><ul><li>Track execution times</li><li>Monitor token usage</li><li>Measure tool call latency</li><li>Generate performance metrics</li></ul><h2 id="agents-method-for-running-tornado-runner" tabindex="-1">Agents Method for Running Tornado-Runner <a class="header-anchor" href="#agents-method-for-running-tornado-runner" aria-label="Permalink to &quot;Agents Method for Running Tornado-Runner&quot;">​</a></h2><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">  public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> async</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Task</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Conversation</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> RunAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">        string</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> input</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        List</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ChatMessage</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> appendMessages</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        GuardRailFunction</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> inputGuardRailFunction</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">        bool</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> streaming</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        Func</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">AgentRunnerEvents</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ValueTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> onAgentRunnerEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">        int</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> maxTurns</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#B5CEA8;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">        string</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> responseId</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        Func</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">string</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ValueTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;&gt;?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> toolPermissionHandle</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> null</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">        bool</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> singleTurn</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">        CancellationToken</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> cancellationToken</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> default</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span></code></pre></div><h3 id="string-input" tabindex="-1">string input <a class="header-anchor" href="#string-input" aria-label="Permalink to &quot;string input&quot;">​</a></h3><p>User Prompt for the agent to process next</p><h3 id="list-chatmessage-appendmessages" tabindex="-1"><code>List&lt;ChatMessage&gt;?</code> appendMessages <a class="header-anchor" href="#list-chatmessage-appendmessages" aria-label="Permalink to &quot;\`List&lt;ChatMessage&gt;?\` appendMessages&quot;">​</a></h3><p>Optional list of messages to append to the conversation history for context</p><h3 id="guardrailfunction-inputguardrailfunction" tabindex="-1">GuardRailFunction? inputGuardRailFunction <a class="header-anchor" href="#guardrailfunction-inputguardrailfunction" aria-label="Permalink to &quot;GuardRailFunction? inputGuardRailFunction&quot;">​</a></h3><p>Optional input guardrail to stop execution</p><h3 id="bool-streaming" tabindex="-1">bool? streaming <a class="header-anchor" href="#bool-streaming" aria-label="Permalink to &quot;bool? streaming&quot;">​</a></h3><p>Optional enable streaming for the agent run loop (requires OnAgentRunnerEvent set to get streaming results)</p><h3 id="func-agentrunnerevents-valuetask-onagentrunnerevent" tabindex="-1">⚡ <code>Func&lt;AgentRunnerEvents, ValueTask&gt;?</code> onAgentRunnerEvent ⚡ <a class="header-anchor" href="#func-agentrunnerevents-valuetask-onagentrunnerevent" aria-label="Permalink to &quot;:zap: \`Func&lt;AgentRunnerEvents, ValueTask&gt;?\` onAgentRunnerEvent :zap:&quot;">​</a></h3><p>Detailed Agent loop event system that provides insight into the agent loop as well as all the streaming results and errors.</p><h3 id="int-maxturns" tabindex="-1">int maxTurns <a class="header-anchor" href="#int-maxturns" aria-label="Permalink to &quot;int maxTurns&quot;">​</a></h3><p>Max agent loops you want the agent to run on a single turn [Default = 10].</p><p>Agent loop:</p><ul><li>Prompt-&gt;Tool Request(turn 1)-&gt;Tool Result-&gt;Agent Response(turn 2)</li><li>Prompt-&gt;Tool Request(turn 1)-&gt;Tool Result-&gt;Tool Request(turn 2)-&gt;Tool Result-&gt;Agent Response(turn 3)</li></ul><h3 id="string-responseid" tabindex="-1">string responseId <a class="header-anchor" href="#string-responseid" aria-label="Permalink to &quot;string responseId&quot;">​</a></h3><p>Optional ResponseId for responseAPI thread usage</p><h3 id="func-string-valuetask-bool-toolpermissionhandle" tabindex="-1"><code>Func&lt;string, ValueTask&lt;bool&gt;&gt;?</code> toolPermissionHandle <a class="header-anchor" href="#func-string-valuetask-bool-toolpermissionhandle" aria-label="Permalink to &quot;\`Func&lt;string, ValueTask&lt;bool&gt;&gt;?\` toolPermissionHandle&quot;">​</a></h3><p>Optional Handle to take care of Passing tool permission requirement to the runner while the loop is stalled. (Only required when you have tool permission = true set on a agent tool)</p><h3 id="bool-singleturn" tabindex="-1">bool singleTurn <a class="header-anchor" href="#bool-singleturn" aria-label="Permalink to &quot;bool singleTurn&quot;">​</a></h3><p>Optional debugging feature to stop agent from running tools</p><h3 id="cancellationtoken-cancellationtoken" tabindex="-1">CancellationToken cancellationToken <a class="header-anchor" href="#cancellationtoken-cancellationtoken" aria-label="Permalink to &quot;CancellationToken cancellationToken&quot;">​</a></h3><p>Cancallation token to stop the agent execution early.</p><h2 id="advanced-usage" tabindex="-1">Advanced Usage <a class="header-anchor" href="#advanced-usage" aria-label="Permalink to &quot;Advanced Usage&quot;">​</a></h2><h3 id="custom-event-handlers" tabindex="-1">Custom Event Handlers <a class="header-anchor" href="#custom-event-handlers" aria-label="Permalink to &quot;Custom Event Handlers&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ValueTask</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> HandleRunnerEvents</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">AgentRunnerEvents</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> runEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    switch</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">runEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">EventType</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerEventTypes</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Start</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">            Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Agent started</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            break</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">            </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerEventTypes</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ToolCall</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">runEvent</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> is</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerToolCallEvent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> toolEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">                Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">$&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Tool called: </span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">{</span><span style="--shiki-light:#B56959;--shiki-dark:#9CDCFE;">toolEvent</span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">.</span><span style="--shiki-light:#B56959;--shiki-dark:#9CDCFE;">ToolName</span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">}</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            break</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">            </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerEventTypes</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Streaming</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">            // Handle streaming</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            break</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">            </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerEventTypes</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Complete</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">            Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Agent completed</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            break</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">            </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerEventTypes</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Error</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">runEvent</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> is</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerErrorEvent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> errorEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">                Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">$&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Error: </span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">{</span><span style="--shiki-light:#B56959;--shiki-dark:#9CDCFE;">errorEvent</span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">.</span><span style="--shiki-light:#B56959;--shiki-dark:#9CDCFE;">Error</span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">.</span><span style="--shiki-light:#B56959;--shiki-dark:#9CDCFE;">Message</span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">}</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            break</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> ValueTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">CompletedTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Conversation</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">RunAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    input</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    onAgentRunnerEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> HandleRunnerEvents</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><h3 id="execution-configuration" tabindex="-1">Execution Configuration <a class="header-anchor" href="#execution-configuration" aria-label="Permalink to &quot;Execution Configuration&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Conversation</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">RunAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    input</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Your query</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    appendMessages</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> previousMessages</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    streaming</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    onAgentRunnerEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> eventHandler</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><h3 id="using-guardrails" tabindex="-1">Using Guardrails <a class="header-anchor" href="#using-guardrails" aria-label="Permalink to &quot;Using Guardrails&quot;">​</a></h3><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">using</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> LlmTornado</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Agents</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> struct</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> IsMath</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    public</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> string</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> Reasoning</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> {</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> get</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> set</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> }</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">    public</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> bool</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> IsMathRequest</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> {</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> get</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> set</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">async</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ValueTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">GuardRailFunctionOutput</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> MathGuardRail</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">string</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> input</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">    TornadoAgent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> mathGuardrail</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoAgent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt41</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">V41Mini</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> instructions</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Check if the user is asking you a Math related question.</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> outputSchema</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> typeof</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IsMath</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">    Conversation</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> TornadoRunner</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">RunAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">mathGuardrail</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> input</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">    IsMath</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> isMath</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Messages</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Last</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">().</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Content</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">JsonDecode</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">IsMath</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> GuardRailFunctionOutput</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">isMath</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Reasoning</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> ??</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> !</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">isMath</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">IsMathRequest</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> ??</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">TornadoAgent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoAgent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    client</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    model</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt41</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">V41</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    instructions</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">You are a useful assistant</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">try</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">    Conversation</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">RunAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">What is the weather?</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> inputGuardRailFunction</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> MathGuardRail</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Messages</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Last</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">().</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Content</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">GuardRailTriggerException</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> guardRailEx</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">      Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">guardRailEx</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">message</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span></code></pre></div><h2 id="tool-permission" tabindex="-1">Tool Permission <a class="header-anchor" href="#tool-permission" aria-label="Permalink to &quot;Tool Permission&quot;">​</a></h2><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes vitesse-light dark-plus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">JsonConverter</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">typeof</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">StringEnumConverter</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">))]</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> enum</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Unit</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    Celsius</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    Fahrenheit</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">[</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Description</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Get the current weather in a given location</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)]</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">public</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> static</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> string</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> GetCurrentWeather</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Description</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">The city and state, e.g. Boston, MA</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)]</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> string</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> location</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    [</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Description</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">unit of temperature measurement in C or F</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)]</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Unit</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> unit</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> Unit</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Celsius</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;">    // Call the weather API here.</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> $&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">31 C</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoAgent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> TornadoAgent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    api</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    ChatModel</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">OpenAi</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Gpt41</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">V41Mini</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    instructions</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">You are a useful assistant.</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    tools</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> [</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">GetCurrentWeather</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">],</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    streaming</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    toolPermissionRequired</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;">new</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> Dictionary</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">string</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> bool</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">        {</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            {</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">GetCurrentWeather</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ValueTask</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> runEventHandler</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">AgentRunnerEvents</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> runEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    switch</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">runEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">EventType</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        case</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerEventTypes</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Streaming</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            if</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">runEvent</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> is</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> AgentRunnerStreamingEvent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> streamingEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">                if</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">streamingEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">ModelStreamingEvent</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> is</span><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;"> ModelStreamingOutputTextDeltaEvent</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> deltaTextEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">                {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">                    Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Write</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">deltaTextEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">DeltaText</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#6A9955;"> // Write the text delta directly</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">                }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">            }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            break</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">        default</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">            break</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> ValueTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">CompletedTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">ValueTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">bool</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;"> toolApprovalHandler</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">string</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> toolRequest</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">toolRequest</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">    Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">Do you approve? (y/n)</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;">    string</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> input</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">ReadLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> ValueTask</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">FromResult</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">input</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;">?</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">ToLower</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">().</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">StartsWith</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">y</span><span style="--shiki-light:#999999;--shiki-dark:#CE9178;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#D4D4D4;"> ??</span><span style="--shiki-light:#1E754F;--shiki-dark:#569CD6;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">[User]: What is the weather in boston?</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Write</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">[Agent]: </span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#2E8F82;--shiki-dark:#4EC9B0;">Conversation</span><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#569CD6;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> agent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">RunAsync</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    input</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#CE9178;">What is the weather in boston?</span><span style="--shiki-light:#B5695977;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    onAgentRunnerEvent</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">runEventHandler</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#9CDCFE;">    toolPermissionHandle</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;"> toolApprovalHandler</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Console</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">WriteLine</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">result</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Messages</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#DCDCAA;">Last</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">().</span><span style="--shiki-light:#B07D48;--shiki-dark:#9CDCFE;">Content</span><span style="--shiki-light:#999999;--shiki-dark:#D4D4D4;">);</span></span></code></pre></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><ul><li>Always implement error handling</li><li>Monitor agent performance metrics</li><li>Log important events</li><li>Test with various scenarios</li><li>Implement timeout mechanisms</li></ul><h2 id="related-topics" tabindex="-1">Related Topics <a class="header-anchor" href="#related-topics" aria-label="Permalink to &quot;Related Topics&quot;">​</a></h2><ul><li><a href="./1. basics">Agent Basics</a></li><li><a href="./2. streaming">Agent Streaming</a></li><li><a href="./6. Guardrails">Guardrails</a></li></ul>`,49)]))}const y=i(t,[["render",l]]);export{g as __pageData,y as default};
